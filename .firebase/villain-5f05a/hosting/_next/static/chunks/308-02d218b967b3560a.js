"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{1559:(e,o,r)=>{r.d(o,{AuthProvider:()=>p,A:()=>g});var t=r(5155),s=r(2115),l=r(9670),n=r(6203);let i={login:async(e,o)=>{try{return await (0,n.x9)(l.j2,e,o)}catch(e){throw e}},logout:async()=>await (0,n.CI)(l.j2),onAuthStateChange:e=>(0,n.hg)(l.j2,e)};var a=r(5317),c=r(858);let d=()=>{let e=["행복한","즐거운","신나는","멋진","훌륭한","대단한","귀여운","친절한","똑똑한","현명한"],o=["고양이","강아지","토끼","여우","사자","호랑이","판다","코알라","기린","코끼리"],r=Math.floor(1e3*Math.random()),t=e[Math.floor(Math.random()*e.length)],s=o[Math.floor(Math.random()*o.length)];return"".concat(t).concat(s).concat(r)},h=async()=>{try{console.log("랜덤 프로필 이미지 가져오기 시도");let e=Math.floor(2*Math.random())+1,o=(0,c.KR)(l.IG,"profile_images/woman".concat(e,".webp")),r=await (0,c.qk)(o);return console.log("프로필 이미지 URL 가져오기 성공:",r),r}catch(e){return console.error("프로필 이미지 가져오기 실패:",e),"https://example.com/default-profile.jpg"}},u=async()=>{try{console.log("API: Google 로그인 시도 중...");let e=new n.HF;e.addScope("profile"),e.addScope("email");let o=(await (0,n.df)(l.j2,e)).user;console.log("API: Google 로그인 성공 -",o.email);let r=await h();r||(r="https://example.com/default-profile.jpg");let t=d();console.log("생성된 사용자 이름:",t),o&&(await (0,n.r7)(o,{displayName:t,photoURL:r}),console.log("사용자 프로필 업데이트 성공")),console.log("Firestore에 사용자 정보 저장 시도");let s=(0,a.H9)(l.db,"users",o.uid);return(await (0,a.x7)(s)).exists()?console.log("이미 등록된 사용자입니다"):(await (0,a.BN)(s,{userId:o.uid,email:o.email,username:t,photoURL:r,createdAt:(0,a.O5)(),bio:""}),console.log("Firestore 사용자 정보 저장 성공")),o}catch(e){throw console.error("API: Google 로그인 실패 -",e),e.code&&console.error("API: 오류 코드 -",e.code),e.message&&console.error("API: 오류 메시지 -",e.message),e.message&&e.message.includes("redirect_uri_mismatch")&&(console.error("API: === 리디렉션 URI 불일치 오류 ==="),console.error("API: 현재 URL:",window.location.href),console.error("API: 현재 호스트:",window.location.host),console.error("API: 현재 오리진:",window.location.origin),console.error("API: 이 오류는 Firebase 콘솔에 등록된 도메인과 현재 사용 중인 도메인이 일치하지 않을 때 발생합니다."),console.error("API: Firebase 콘솔(https://console.firebase.google.com/project/villain-5f05a/authentication/settings)에서"),console.error('API: "승인된 도메인" 목록에 현재 도메인을 추가해주세요.'),console.error("API: ===================================")),"auth/popup-blocked"===e.code?console.error("팝업이 차단되었습니다. 브라우저 설정에서 팝업 허용을 확인해주세요."):"auth/popup-closed-by-user"===e.code?console.error("사용자가 팝업을 닫았습니다."):"auth/cancelled-popup-request"===e.code?console.error("이전 팝업 요청이 있어 새 요청이 취소되었습니다."):"auth/unauthorized-domain"===e.code&&(console.error("현재 도메인이 Firebase 콘솔에 등록되지 않았습니다."),console.error('Firebase 콘솔에서 "승인된 도메인" 목록에 현재 도메인을 추가해주세요.'),console.error("승인이 필요한 도메인:",window.location.host)),e}},w=(0,s.createContext)(null),g=()=>{let e=(0,s.useContext)(w);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function p(e){let{children:o}=e,[r,l]=(0,s.useState)(!1),[n,a]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=i.onAuthStateChange(e=>{e?(a({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),l(!0),localStorage.setItem("isLoggedIn","true")):(a(null),l(!1),localStorage.removeItem("isLoggedIn")),d(!1)});return()=>e()},[]);let h=async(e,o)=>{try{let r=await i.login(e,o),t={uid:r.user.uid,email:r.user.email,displayName:r.user.displayName,photoURL:r.user.photoURL};return a(t),l(!0),localStorage.setItem("isLoggedIn","true"),t}catch(e){throw console.error("로그인 실패:",e),e}},g=async()=>{try{await i.logout(),a(null),l(!1),localStorage.removeItem("isLoggedIn")}catch(e){throw console.error("로그아웃 실패:",e),e}},p=async()=>{try{console.log("AuthContext: Google 로그인 시도");let e=await u();console.log("AuthContext: Google 로그인 성공, UID:",e.uid);let o={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL};return a(o),l(!0),localStorage.setItem("isLoggedIn","true"),o}catch(e){throw console.error("AuthContext: Google 로그인 실패:",e),e instanceof Error&&(console.error("AuthContext: 오류 메시지:",e.message),console.error("AuthContext: 오류 스택:",e.stack)),e}};return c?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsx)(w.Provider,{value:{isLoggedIn:r,setIsLoggedIn:l,user:n,setUser:a,login:h,logout:g,googleLogin:p,loading:c},children:o})}},1694:(e,o,r)=>{r.d(o,{Hz:()=>d,MW:()=>u,PD:()=>l,b1:()=>i,f:()=>s,li:()=>h,mu:()=>g,ny:()=>n,px:()=>a,wP:()=>w,z_:()=>c});var t=r(5155);r(2115);let s=e=>{let{className:o="w-auto h-8"}=e;return(0,t.jsxs)("svg",{viewBox:"0 0 609 224",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:[(0,t.jsx)("path",{d:"M74.5 41H0L99.3333 224H128.306L149 178.25L74.5 41Z",fill:"currentColor"}),(0,t.jsx)("rect",{x:"75",y:"41",width:"25",height:"9",fill:"currentColor"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M178.681 0H182.321C182.321 24.1232 201.877 43.6791 226 43.68V47.32C201.877 47.321 182.321 66.8768 182.321 91L178.681 91C178.681 66.8762 159.124 47.32 135 47.32V43.68C159.124 43.68 178.681 24.1238 178.681 0Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M536.779 45.4155V106.656H476.384V127.562C506.159 127.35 527.065 126.506 550.083 122.916L552.195 144.455C525.798 148.468 502.147 149.101 465.403 149.101H449.354V86.1718H509.96V66.7439H449.143V45.4155H536.779ZM604.143 32.7451V174.231H577.324V101.587H546.493V78.7807H577.324V32.7451H604.143ZM609 199.783V221.322H475.539V162.616H502.358V199.783H609Z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M415.988 32.5342V131.363H389.169V32.5342H415.988ZM416.2 139.599V190.491H313.992V202.739H421.479V223.434H287.595V171.275H389.381V160.082H287.173V139.599H416.2ZM291.608 40.5587V62.7319H331.942V40.5587H358.761V125.45H265V40.5587H291.608ZM291.608 104.122H331.942V83.4268H291.608V104.122Z",fill:"currentColor"})]})},l=e=>{let{className:o="w-auto h-6"}=e;return(0,t.jsxs)("svg",{viewBox:"0 0 30 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:[(0,t.jsx)("path",{d:"M9.80007 5.46582H0.733398L12.8223 27.5992H16.3482L18.8667 22.0658L9.80007 5.46582Z",fill:"currentColor"}),(0,t.jsx)("rect",{x:"9.7998",y:"5.46582",width:"3.06667",height:"0.933333",fill:"currentColor"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5122 0.399414H23.9549C23.9549 3.33308 26.333 5.7113 29.2667 5.71142V6.15409C26.333 6.1542 23.9549 8.53242 23.9549 11.4661L23.5122 11.4661C23.5122 8.53234 21.1339 6.15409 18.2002 6.15409V5.71142C21.1339 5.71142 23.5122 3.33315 23.5122 0.399414Z",fill:"currentColor"})]})},n=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,t.jsx)("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},i=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,t.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,t.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 13.4876 3.36093 14.891 4 16.1272L3 21L7.8728 20C9.10904 20.6391 10.5124 21 12 21Z"})]})},a=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,t.jsx)("path",{d:"M17.3604 20H6C4.89543 20 4 19.1046 4 18V10H7.92963C8.59834 10 9.2228 9.6658 9.59373 9.1094L12.1094 5.3359C12.6658 4.5013 13.6025 4 14.6056 4H14.8195C15.4375 4 15.9075 4.55487 15.8059 5.1644L15 10H18.5604C19.8225 10 20.7691 11.1547 20.5216 12.3922L19.3216 18.3922C19.1346 19.3271 18.3138 20 17.3604 20Z"}),(0,t.jsx)("path",{d:"M8 10V20"})]})},c=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1"})]})},d=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:"2"})})},h=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,t.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,t.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,t.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,t.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,t.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]})},u=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{width:"31",height:"30",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_417_1317)",children:[(0,t.jsx)("rect",{width:"30",height:"30",transform:"translate(0.5)",fill:"white"}),(0,t.jsx)("path",{d:"M22.7141 13.9286C25.5545 13.9286 27.857 11.0504 27.857 7.49998C27.857 3.94958 25.5545 1.07141 22.7141 1.07141C19.8738 1.07141 17.5713 3.94958 17.5713 7.49998C17.5713 11.0504 19.8738 13.9286 22.7141 13.9286Z",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M22.7129 13.9286V28.9286",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M7.49902 1.07141V28.9286",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M12.8569 1.07141V6.42855C12.8569 7.13206 12.7183 7.82869 12.4491 8.47864C12.1799 9.1286 11.7852 9.71917 11.2878 10.2166C10.7903 10.7141 10.1998 11.1087 9.54981 11.3779C8.89985 11.6471 8.20323 11.7857 7.49972 11.7857V11.7857C6.07892 11.7857 4.71631 11.2213 3.71165 10.2166C2.70699 9.21197 2.14258 7.84936 2.14258 6.42855V1.07141",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_417_1317",children:(0,t.jsx)("rect",{width:"30",height:"30",fill:"white",transform:"translate(0.5)"})})})]})},w=e=>{let{className:o="w-6 h-6"}=e;return(0,t.jsxs)("svg",{width:"31",height:"30",viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_417_1317)",children:[(0,t.jsx)("rect",{width:"30",height:"30",transform:"translate(0.5)",fill:"white"}),(0,t.jsx)("path",{d:"M15.5 3L28.5 10L15.5 17L2.5 10L15.5 3Z",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M22.5 13.5V22.5",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M8.5 13.5V22.5",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M2.5 10V27",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M28.5 10V27",stroke:"#000001",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_417_1317",children:(0,t.jsx)("rect",{width:"30",height:"30",fill:"white",transform:"translate(0.5)"})})})]})},g=e=>{let{className:o="w-5 h-5"}=e;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:(0,t.jsx)("polyline",{points:"6 9 12 15 18 9"})})}},9670:(e,o,r)=>{r.d(o,{IG:()=>h,db:()=>c,j2:()=>d});var t=r(3915),s=r(6864),l=r(6203),n=r(5317),i=r(858);console.log("Firebase 초기화 - 브라우저 환경"),console.log("현재 환경:","production"),console.log("현재 URL:",window.location.href),console.log("현재 호스트:",window.location.host),console.log("현재 오리진:",window.location.origin);let a=(0,t.Wp)({apiKey:"AIzaSyAdmo8SKrrkDocCXGIE_eOo4QxWMxA0is8",authDomain:"villain.today",projectId:"villain-5f05a",storageBucket:"villain-5f05a.firebasestorage.app",messagingSenderId:"579679958637",appId:"1:579679958637:web:38705cebd28d47fc803164",measurementId:"G-0MLWMN815Q"});try{(0,s.P5)(a)}catch(e){console.error("Analytics initialization failed:",e)}let c=(0,n.aU)(a),d=(0,l.xI)(a),h=(0,i.c7)(a);new l.HF}}]);