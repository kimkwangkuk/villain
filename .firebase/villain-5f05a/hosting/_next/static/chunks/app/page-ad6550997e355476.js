(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1140:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(5155),s=r(2115),d=r(5695),n=r(5812),o=r(9670),l=r(5317);let c=async()=>{try{let e=await (0,l.gS)((0,l.rJ)(o.db,"categories"),{name:"테스트 카테고리",description:"테스트용 카테고리입니다",createdAt:(0,l.O5)()});console.log("카테고리 생성됨:",e.id);let a=await (0,l.gS)((0,l.rJ)(o.db,"posts"),{title:"테스트 게시글",content:"이것은 테스트 게시글입니다.",authorId:"test-author",authorName:"테스트 작성자",categoryId:e.id,createdAt:(0,l.O5)(),updatedAt:(0,l.O5)(),likes:0,comments:[]});return console.log("게시글 생성됨:",a.id),{categoryId:e.id,postId:a.id}}catch(e){throw console.error("테스트 데이터 생성 실패:",e),e}},i=async()=>{let e=(await (0,l.GG)((0,l.rJ)(o.db,"categories"))).docs.map(e=>({id:e.id,...e.data()})),a=[];for(let r of e)for(let e=1;e<=5;e++){let t={title:"".concat(r.name," 사례 #").concat(e),content:"이것은 ".concat(r.name,"의 ").concat(e,"번째 사례입니다. 여기에 자세한 내용이 들어갑니다..."),categoryId:r.id,authorId:"test-author",authorName:"테스트 작성자",createdAt:(0,l.O5)(),updatedAt:(0,l.O5)(),likes:Math.floor(50*Math.random()),commentCount:0},s=await (0,l.gS)((0,l.rJ)(o.db,"posts"),t);a.push({id:s.id,...t})}return console.log("테스트 포스트 생성 완료:",a.length),a};window.createTestData=c,window.createTestPosts=i;var u=r(7624),g=r(1694),x=r(6203);let p=function(){return(0,t.jsxs)("div",{className:"block rounded-lg transition-colors duration-200",children:[(0,t.jsx)("div",{className:"flex flex-col h-full",children:(0,t.jsxs)("div",{className:"bg-[#F5F5F7] dark:bg-[#0A0A0A] rounded-2xl pt-[14px] p-5 pb-3 flex flex-col h-[360px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-neutral-800 dark-pulse"}),(0,t.jsxs)("div",{className:"ml-2",children:[(0,t.jsx)("div",{className:"h-[13px] w-24 bg-gray-300 dark:bg-neutral-800 rounded mb-1 dark-pulse"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"h-[12px] w-16 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"mx-1 h-[12px] text-gray-500 dark:text-neutral-500",children:"\xb7"}),(0,t.jsx)("div",{className:"h-[12px] w-20 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"})]})]})]}),(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-300 dark:bg-neutral-800 dark-pulse"})]}),(0,t.jsx)("div",{className:"h-[19px] w-3/4 bg-gray-300 dark:bg-neutral-800 rounded mb-[6px] dark-pulse"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-[15px] w-full bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[15px] w-full bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[15px] w-full bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[15px] w-3/4 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[15px] w-1/2 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"})]}),(0,t.jsxs)("div",{className:"mt-auto flex items-center justify-between text-[14px] text-gray-500 dark:text-neutral-500 pb-3",children:[(0,t.jsx)("div",{className:"h-[14px] w-20 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[14px] w-16 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-neutral-900 pt-3 -mx-5 px-5",children:[(0,t.jsx)("div",{className:"h-[22px] w-20 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[22px] w-20 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"}),(0,t.jsx)("div",{className:"h-[22px] w-20 bg-gray-300 dark:bg-neutral-800 rounded dark-pulse"})]})]})}),(0,t.jsx)("style",{children:"\n          @keyframes darkPulse {\n            0%, 100% {\n              opacity: 1;\n            }\n            50% {\n              opacity: 0.6;\n            }\n          }\n          \n          .dark-pulse {\n            animation: darkPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n          }\n          \n          @media (prefers-color-scheme: dark) {\n            .animate-pulse {\n              animation: none;\n            }\n          }\n          \n          :root.dark .animate-pulse {\n            animation: none;\n          }\n        "})]})},m={order1:g.MW,order2:g.MW,order3:g.MW,order4:g.MW,order5:g.MW,order6:g.wP,order7:g.MW,order8:g.MW,order9:g.MW};function h(){let[e,a]=(0,s.useState)([]),[r,c]=(0,s.useState)([]),[i,h]=(0,s.useState)(null),[b,w]=(0,s.useState)(!0),[f,y]=(0,s.useState)(!0),[j,v]=(0,s.useState)(!0),[k,N]=(0,s.useState)([]),[S,A]=(0,s.useState)(null),[M,P]=(0,s.useState)(null),[E,I]=(0,s.useState)(!0),[H,J]=(0,s.useState)(!1),[_,L]=(0,s.useState)(!1),[W,z]=(0,s.useState)(!1),[O,T]=(0,s.useState)(null),[B,C]=(0,s.useState)(!1),[D,G]=(0,s.useState)([]);(0,s.useRef)(null);let R=(0,d.useSearchParams)().get("category"),[Y,F]=(0,s.useState)(!1),[V,U]=(0,s.useState)(0),q=(0,s.useRef)(""),K=(0,s.useRef)(null),[Q,X]=(0,s.useState)(!1),[Z,$]=(0,s.useState)(0),[ee,ea]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=()=>{U(window.scrollY)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.useEffect)(()=>{if(""===q.current){q.current=window.location.pathname+window.location.search;let e=sessionStorage.getItem("lastVisitedPath");if(e&&e.includes("/posts/")){F(!0),z(!0);let e=sessionStorage.getItem("cachedPosts");if(e)try{let r=JSON.parse(e);a(r);let t=sessionStorage.getItem("cachedLastDocId");t&&T(t),w(!1)}catch(e){console.error("캐시된 데이터 복원 실패:",e)}}}return sessionStorage.setItem("lastVisitedPath",window.location.pathname+window.location.search),()=>{sessionStorage.setItem("lastVisitedPath",window.location.pathname+window.location.search)}},[]),(0,s.useEffect)(()=>{let e=()=>{F(!0)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),(0,s.useEffect)(()=>{R?h(R):h(null),Y||window.scrollTo(0,0),y(!1)},[R,Y]),(0,s.useEffect)(()=>{K.current&&(K.current.scrollLeft=0)},[]),(0,s.useEffect)(()=>{let e=(0,x.hg)(o.j2,e=>{A(e)});return()=>e()},[]),(0,s.useEffect)(()=>{W||(async()=>{try{console.log("홈페이지 데이터 로드 시작"),console.log("카테고리 로드 시도");let e=await (0,n.bW)();console.log("카테고리 로드 완료:",e.length),c(e),y(!1),console.log("포스트 로드 시도"),await er(),console.log("포스트 로드 완료"),v(!1)}catch(e){console.error("데이터 로딩 실패:",e),y(!1),v(!1),C(!0)}finally{w(!1),setTimeout(()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-1e3&&et()},500)}})()},[W]);let er=async()=>{if(!H)try{let r;if(i)r=M?(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l._M)("categoryId","==",i),(0,l.My)("createdAt","desc"),(0,l.HM)(M),(0,l.AB)(20)):(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l._M)("categoryId","==",i),(0,l.My)("createdAt","desc"),(0,l.AB)(20));else if(O&&!M){let e=(0,l.H9)(o.db,"posts",O),a=await (0,l.x7)(e);a.exists()?(r=(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l.My)("createdAt","desc"),(0,l.HM)(a),(0,l.AB)(20)),T(null)):r=(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l.My)("createdAt","desc"),(0,l.AB)(20))}else r=M?(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l.My)("createdAt","desc"),(0,l.HM)(M),(0,l.AB)(20)):(0,l.P)((0,l.rJ)(o.db,"posts"),(0,l.My)("createdAt","desc"),(0,l.AB)(20));let t=await (0,l.GG)(r),s=t.docs.map(e=>({id:e.id,...e.data()})),d=new Set(e.map(e=>e.id)),n=s.filter(e=>!d.has(e.id));n.length>0&&a(e=>[...e,...n]),t.docs.length>0&&P(t.docs[t.docs.length-1]),s.length<20&&I(!1)}catch(e){console.error("포스트 로딩 실패:",e)}},et=async()=>{H||!E||j||(J(!0),await er(),J(!1))};(0,s.useEffect)(()=>{let e=()=>{E&&!H&&window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&et()};return window.addEventListener("scroll",e),window.innerHeight+window.scrollY>=document.body.offsetHeight-1e3&&et(),()=>window.removeEventListener("scroll",e)},[E,H,M]);let es=e=>{let a=new URL(window.location.href);e?a.searchParams.set("category",e):a.searchParams.delete("category"),window.history.pushState({},"",a),h(e)},ed=Array.from(new Map((i?j?D.filter(e=>e.categoryId===i):e.filter(e=>e.categoryId===i):j?D:e).map(e=>[e.id,e])).values()),en=async(e,a)=>{e.preventDefault(),e.stopPropagation();try{await navigator.clipboard.writeText("".concat(window.location.origin,"/postdetail/").concat(a)),L(!0),setTimeout(()=>L(!1),2e3)}catch(e){console.error("클립보드 복사 실패:",e)}};return f&&!r.length?(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)("div",{className:"bg-background border-b border-gray-200 dark:border-neutral-800 sticky top-16 z-40",children:(0,t.jsx)("div",{className:"max-w-[1200px] mx-auto relative",children:(0,t.jsxs)("div",{className:"flex overflow-x-auto whitespace-nowrap pt-4 md:pt-10 px-4 gap-5 md:gap-6 lg:gap-8 pb-2 cursor-grab select-none hide-scrollbar",children:[(0,t.jsx)("button",{className:"text-[14px] pb-2 px-1 transition-colors text-foreground border-b-2 border-foreground",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-[10px]",children:[(0,t.jsx)(g.Hz,{className:"w-[28px] h-[28px]"}),(0,t.jsx)("span",{children:"전체"})]})}),Array.from({length:5}).map((e,a)=>(0,t.jsx)("button",{className:"text-[14px] pb-2 px-1 transition-colors text-gray-500 dark:text-neutral-500",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-[10px]",children:[(0,t.jsx)("div",{className:"w-[28px] h-[28px] bg-gray-300 dark:bg-neutral-900 rounded animate-pulse"}),(0,t.jsx)("span",{className:"w-16 h-4 bg-gray-300 dark:bg-neutral-900 rounded animate-pulse"})]})},a))]})})}),(0,t.jsx)("div",{className:"py-8 md:pt-[50px]",children:(0,t.jsx)("div",{className:"max-w-[1200px] mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,a)=>(0,t.jsx)(p,{},a))})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,t.jsx)("div",{className:"sticky top-16 z-40 bg-background border-b border-gray-200 dark:border-neutral-900",children:(0,t.jsx)("div",{className:"max-w-[1200px] mx-auto",children:(0,t.jsxs)("div",{ref:K,className:"flex overflow-x-auto whitespace-nowrap pt-4 md:pt-10 px-4 gap-5 md:gap-6 lg:gap-8 cursor-grab select-none hide-scrollbar bg-background",children:[(0,t.jsx)("button",{onClick:()=>es(null),"data-category":"all",className:"text-[14px] pb-3 px-1 transition-colors ".concat(i?"text-foreground":"text-foreground border-b-2 border-foreground"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-[10px]",children:[(0,t.jsx)(g.Hz,{className:"w-[28px] h-[28px]"}),(0,t.jsx)("span",{children:"전체"})]})}),r.map(e=>{let a=m["order".concat(e.order||0)]||g.Hz;return(0,t.jsx)("button",{"data-category":e.id,onClick:()=>es(e.id),className:"text-[14px] pb-3 px-1 transition-colors ".concat(i===e.id?"text-foreground border-b-2 border-foreground":"text-foreground"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-[10px]",children:[(0,t.jsx)(a,{className:"w-[28px] h-[28px]"}),(0,t.jsx)("span",{children:e.name})]})},e.id)})]})})}),(0,t.jsxs)("div",{className:"bg-background transition-colors duration-200",children:[(0,t.jsx)("div",{className:"pt-[20px] md:pt-[50px] pb-8 bg-background",children:(0,t.jsxs)("div",{className:"max-w-[1200px] mx-auto px-4",children:[j?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,a)=>(0,t.jsx)(p,{},a))}):0===ed.length?(0,t.jsx)("div",{className:"text-center py-10",children:(0,t.jsx)("p",{className:"text-gray-500 dark:text-neutral-400",children:"게시글이 없습니다."})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:ed.map(e=>(0,t.jsx)(u.A,{post:e,categories:r,onShare:en},"post-".concat(e.id)))}),H&&!j&&ed.length>0&&(0,t.jsx)("div",{className:"text-center mt-6 py-2",children:(0,t.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"})})]})}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t border-gray-200 dark:border-gray-800 z-10",children:_&&(0,t.jsx)("div",{className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-foreground text-background px-4 py-2 rounded-lg z-50",children:"링크가 복사되었습니다!"})})]})]})}window.createTestData=c,window.createTestPosts=i,window.createCategories=n.x0},6406:(e,a,r)=>{Promise.resolve().then(r.bind(r,1140))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,146,855,874,389,498,308,84,587,441,684,358],()=>a(6406)),_N_E=e.O()}]);