(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{5787:(e,r,a)=>{Promise.resolve().then(a.bind(a,9349))},9349:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>g});var s=a(5155),t=a(2115),l=a(6874),o=a.n(l),c=a(5695),d=a(6203),n=a(858),i=a(9670),u=a(1559),m=a(1694);let x=()=>{let e=["행복한","즐거운","신나는","멋진","훌륭한","대단한","귀여운","친절한","똑똑한","현명한"],r=["고양이","강아지","토끼","여우","사자","호랑이","판다","코알라","기린","코끼리"],a=Math.floor(1e3*Math.random()),s=e[Math.floor(Math.random()*e.length)],t=r[Math.floor(Math.random()*r.length)];return"".concat(s).concat(t).concat(a)},h=()=>(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white dark:text-gray-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});function g(){let e=(0,c.useRouter)(),{googleLogin:r}=(0,u.A)(),[a,l]=(0,t.useState)({email:"",password:"",confirmPassword:"",username:x()}),[g,p]=(0,t.useState)(""),[f,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("회원가입 페이지 마운트 - 클라이언트 사이드"),console.log("현재 URL:",window.location.href),console.log("개발 환경:","production")},[]);let y=e=>{l({...a,[e.target.name]:e.target.value})},w=e=>{let r=e.code;switch(r){case"auth/email-already-in-use":return"이미 사용 중인 이메일 주소입니다. 다른 이메일로 시도하거나 로그인해주세요.";case"auth/invalid-email":return"유효하지 않은 이메일 주소입니다. 올바른 이메일 형식으로 입력해주세요.";case"auth/weak-password":return"비밀번호가 너무 약합니다. 6자 이상의 더 강력한 비밀번호를 사용해주세요.";case"auth/user-not-found":return"등록되지 않은 이메일입니다. 이메일을 확인하거나 회원가입을 진행해주세요.";case"auth/wrong-password":return"잘못된 비밀번호입니다. 비밀번호를 확인하고 다시 시도해주세요.";case"auth/too-many-requests":return"너무 많은 로그인 시도가 있었습니다. 보안을 위해 잠시 후 다시 시도해주세요.";case"auth/network-request-failed":return"네트워크 연결에 문제가 있습니다. 인터넷 연결을 확인하고 다시 시도해주세요.";case"auth/popup-blocked":return"로그인 팝업이 차단되었습니다. 브라우저 설정에서 팝업을 허용해주세요.";default:return"회원가입 중 오류가 발생했습니다 (".concat(r,"). 잠시 후 다시 시도하거나 관리자에게 문의해주세요.")}},v=async()=>{let e=(0,n.c7)(),r=Math.floor(2*Math.random())+1,a=(0,n.KR)(e,"profile_images/woman".concat(r,".webp"));try{return await (0,n.qk)(a)}catch(a){console.error("프로필 이미지 가져오기 실패:",a);let r=(0,n.KR)(e,"profile_images/default.webp");try{return await (0,n.qk)(r)}catch(e){return console.error("기본 프로필 이미지 가져오기 실패:",e),null}}},j=async r=>{if(r.preventDefault(),p(""),a.password!==a.confirmPassword)return void p("비밀번호가 일치하지 않습니다. 다시 확인해주세요.");try{let r=await v();if(!r)return void p("프로필 이미지를 가져오는데 실패했습니다. 네트워크 연결을 확인하고 다시 시도해주세요.");let s=await (0,d.eJ)(i.j2,a.email,a.password);s.user&&await (0,d.r7)(s.user,{displayName:a.username,photoURL:r}),alert("회원가입이 완료되었습니다."),e.push("/login")}catch(r){console.error("회원가입 실패:",r);let e=w(r);p("회원가입 실패: ".concat(e))}},k=async()=>{try{b(!0),console.log("구글 로그인 시도 - 회원가입 페이지"),console.log("현재 URL:",window.location.href),console.log("잠시 후 로그인 팝업이 열립니다. 팝업 차단을 허용해 주세요.");let a=setTimeout(()=>{console.error("구글 로그인 시간 초과 (10초)"),p("로그인 요청이 시간 초과되었습니다. 네트워크 연결을 확인하고 다시 시도해주세요."),b(!1)},1e4),s=await r();if(clearTimeout(a),s)console.log("구글 로그인 성공 - 회원가입 페이지"),console.log("로그인 사용자 정보:",{uid:s.uid,email:s.email,name:s.displayName}),setTimeout(()=>{b(!1),e.push("/home")},1e3);else throw b(!1),Error("로그인은 성공했지만 사용자 정보를 받지 못했습니다.")}catch(e){b(!1),console.error("Google 로그인 실패 - 회원가입 페이지:",e),e.code&&console.error("오류 코드:",e.code),e.message&&console.error("오류 메시지:",e.message),"auth/unauthorized-domain"===e.code?(p("현재 도메인이 Firebase에 등록되지 않았습니다. Firebase 콘솔에서 도메인을 추가해주세요."),console.error("Firebase 콘솔에서 승인된 도메인 목록에 현재 도메인(localhost)을 추가해야 합니다."),console.error("https://console.firebase.google.com/project/_/authentication/settings 에서 승인된 도메인을 확인해주세요."),console.error("에뮬레이터를 사용 중인지 확인하세요. 에뮬레이터 사용 시 도메인 제한이 우회됩니다.")):"auth/popup-closed-by-user"===e.code?p("로그인 팝업이 닫혔습니다. 팝업 창을 닫지 말고 로그인을 완료해 주세요."):"auth/popup-blocked"===e.code?p("브라우저에서 팝업이 차단되었습니다. 팝업 차단을 해제하고 다시 시도해 주세요."):"auth/network-request-failed"===e.code?(p("네트워크 연결에 문제가 있습니다. 인터넷 연결을 확인하고 다시 시도해 주세요."),console.error("로컬호스트와 Firebase 서버 간의 연결에 문제가 있습니다."),console.error("CORS 또는 네트워크 문제일 수 있습니다.")):"auth/internal-error"===e.code?(p("Firebase 내부 오류가 발생했습니다. 잠시 후 다시 시도해 주세요."),console.error("Firebase 내부 오류 - 에뮬레이터 설정을 확인하세요.")):"auth/cancelled-popup-request"===e.code?p("이전 팝업 요청이 취소되었습니다. 다시 시도해 주세요."):p("Google 로그인에 실패했습니다: ".concat(e.code||"알 수 없는 오류"))}};return(0,s.jsx)("div",{className:"min-h-screen flex flex-col bg-white dark:bg-black",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row h-screen p-4",children:[(0,s.jsxs)("div",{className:"w-full md:w-2/3 flex flex-col p-6 md:p-12 lg:p-16 bg-white dark:bg-black relative rounded-2xl shadow-sm mb-4 md:mb-0 md:mr-4",children:[(0,s.jsx)("div",{className:"absolute top-1 left-0",children:(0,s.jsx)(o(),{href:"/home",className:"text-black dark:text-white hover:text-gray-900 dark:hover:text-gray-100 flex items-center",children:(0,s.jsx)(m.f,{className:"h-6 text-black dark:text-white"})})}),(0,s.jsx)("div",{className:"flex-grow flex flex-col items-center justify-center mt-10 md:mt-0",children:(0,s.jsx)("div",{className:"text-center space-y-6 md:space-y-4 w-full",children:(0,s.jsxs)("div",{className:"space-y-6 md:space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-[18px]",children:"빌런 제보 익명 커뮤니티"}),(0,s.jsxs)("h1",{className:"text-gray-800 dark:text-white text-2xl md:text-3xl lg:text-4xl font-bold",style:{lineHeight:"1.4"},children:["내 일상을 어지럽히는 빌런을 제보하고",(0,s.jsx)("br",{}),"밝은 세상을 만들어요."]})]})})})]}),(0,s.jsx)("div",{className:"w-full md:w-1/3 flex items-center justify-center p-6 md:p-10 bg-gray-100 dark:bg-[#111111] rounded-2xl shadow-sm",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("form",{className:"space-y-4 mb-6",onSubmit:j,children:[g&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 mb-4 rounded-md",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400",children:g})})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"이메일을 입력해주세요",className:"block w-full px-4 py-2 border-0 rounded-md bg-gray-200 dark:bg-neutral-800 text-sm text-gray-900 dark:text-neutral-300 placeholder-gray-500 dark:placeholder-neutral-600 focus:outline-none focus:ring-0",value:a.email,onChange:y})})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{id:"username",name:"username",type:"text",required:!0,placeholder:"닉네임",className:"block w-full px-4 py-2 border-0 rounded-md bg-gray-200 dark:bg-neutral-800 text-sm text-gray-900 dark:text-neutral-300 placeholder-gray-500 dark:placeholder-neutral-600 focus:outline-none focus:ring-0",value:a.username,onChange:y})})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"비밀번호를 입력해주세요",className:"block w-full px-4 py-2 border-0 rounded-md bg-gray-200 dark:bg-neutral-800 text-sm text-gray-900 dark:text-neutral-300 placeholder-gray-500 dark:placeholder-neutral-600 focus:outline-none focus:ring-0",value:a.password,onChange:y})})}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,placeholder:"비밀번호를 다시 입력해주세요",className:"block w-full px-4 py-2 border-0 rounded-md bg-gray-200 dark:bg-neutral-800 text-sm text-gray-900 dark:text-neutral-300 placeholder-gray-500 dark:placeholder-neutral-600 focus:outline-none focus:ring-0",value:a.confirmPassword,onChange:y})})})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-center",children:(0,s.jsx)("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 rounded-lg shadow-sm text-sm font-medium text-white dark:text-gray-800 bg-black dark:bg-white hover:bg-gray-800 dark:hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 transition-colors border border-gray-800 dark:border-gray-200",children:"회원가입"})})]}),(0,s.jsx)("div",{className:"relative my-6 flex justify-center",children:(0,s.jsxs)("div",{className:"w-full relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-gray-100 dark:bg-[#111111] text-gray-500 dark:text-gray-400 text-xs",children:"또는"})})]})}),(0,s.jsx)("div",{className:"space-y-4 mb-6 flex justify-center",children:(0,s.jsx)("button",{onClick:k,disabled:f,className:"w-full flex justify-center items-center px-4 py-3 rounded-lg shadow-sm text-sm font-medium text-white dark:text-gray-800 bg-black dark:bg-white hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors border border-gray-800 dark:border-gray-200",children:f?(0,s.jsx)(h,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5 mr-2 bg-white rounded-full p-0.5"}),"Google로 계속하기"]})})}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["이미 계정이 있으신가요?"," ",(0,s.jsx)(o(),{href:"/login",className:"font-medium text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300",children:"로그인"})]})})]})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,146,855,874,308,441,684,358],()=>r(5787)),_N_E=e.O()}]);