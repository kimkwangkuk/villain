"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{285:(t,e,a)=>{a.d(e,{$:()=>i});var r=a(5155);a(2115);var o=a(9708),s=a(2085),n=a(9434);let d=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-background dark:border-input dark:hover:bg-accent/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(t){let{className:e,variant:a,size:s,asChild:i=!1,...l}=t,c=i?o.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,n.cn)(d({variant:a,size:s,className:e})),...l})}},1394:(t,e,a)=>{a.d(e,{BK:()=>d,eu:()=>n,q5:()=>i});var r=a(5155);a(2115);var o=a(4011),s=a(9434);function n(t){let{className:e,...a}=t;return(0,r.jsx)(o.bL,{"data-slot":"avatar",className:(0,s.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...a})}function d(t){let{className:e,...a}=t;return(0,r.jsx)(o._V,{"data-slot":"avatar-image",className:(0,s.cn)("aspect-square size-full",e),...a})}function i(t){let{className:e,...a}=t;return(0,r.jsx)(o.H4,{"data-slot":"avatar-fallback",className:(0,s.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...a})}},2723:(t,e,a)=>{a.d(e,{l:()=>n,t:()=>s});var r=a(9670),o=a(5317);let s=async(t,e,a)=>{try{let s=(0,o.H9)(r.db,"posts",t);if(!(await (0,o.x7)(s)).exists())throw Error("게시물이 존재하지 않습니다.");let n=(0,o.H9)(r.db,"post_reactions",t),d=await (0,o.x7)(n);d.exists()?a?await (0,o.mZ)(n,{["reactions.".concat(e)]:a}):await (0,o.mZ)(n,{["reactions.".concat(e)]:null}):await (0,o.BN)(n,{postId:t,reactions:a?{[e]:a}:{}});let i=d.exists()?d.data().reactions:{},l=Object.values(i).filter(Boolean).length,c=a?i[e]?l:l+1:i[e]?l-1:l;return await (0,o.mZ)(s,{reactionCount:c,updatedAt:(0,o.O5)()}),{reactionCount:c}}catch(t){throw console.error("반응 업데이트 실패:",t),t}},n=async t=>{try{let e=(0,o.H9)(r.db,"post_reactions",t),a=await (0,o.x7)(e);if(!a.exists())return{};return a.data().reactions||{}}catch(t){return console.error("반응 데이터 가져오기 실패:",t),{}}}},4838:(t,e,a)=>{a.d(e,{SQ:()=>i,_2:()=>l,rI:()=>n,ty:()=>d});var r=a(5155);a(2115);var o=a(4574),s=a(9434);function n(t){let{...e}=t;return(0,r.jsx)(o.bL,{"data-slot":"dropdown-menu",...e})}function d(t){let{...e}=t;return(0,r.jsx)(o.l9,{"data-slot":"dropdown-menu-trigger",...e})}function i(t){let{className:e,sideOffset:a=4,...n}=t;return(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,s.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function l(t){let{className:e,inset:a,variant:n="default",...d}=t;return(0,r.jsx)(o.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,s.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...d})}},6695:(t,e,a)=>{a.d(e,{Wu:()=>d,Zp:()=>s,aR:()=>n,wL:()=>i});var r=a(5155);a(2115);var o=a(9434);function s(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col rounded-xl border py-6 shadow-sm",e),...a})}function n(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function d(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",e),...a})}function i(t){let{className:e,...a}=t;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,o.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}},7242:(t,e,a)=>{a.d(e,{qH:()=>n,wD:()=>s});var r=a(9670),o=a(5317);let s=async(t,e,a,s)=>{try{if(await n(t,e,a))throw Error("이미 신고한 콘텐츠입니다.");let d={type:t,contentId:e,reporterId:a,reason:s,status:"pending",createdAt:(0,o.O5)()};return await (0,o.gS)((0,o.rJ)(r.db,"reports"),d),!0}catch(t){throw console.error("신고 실패:",t),t}},n=async(t,e,a)=>{try{let s=(0,o.P)((0,o.rJ)(r.db,"reports"),(0,o._M)("type","==",t),(0,o._M)("contentId","==",e),(0,o._M)("reporterId","==",a));return!(await (0,o.GG)(s)).empty}catch(t){return console.error("신고 여부 확인 실패:",t),!1}}},8038:(t,e,a)=>{a.d(e,{Br:()=>r});let r=[{id:"like",emoji:"\uD83D\uDC4D",label:"좋아요"},{id:"love",emoji:"❤️",label:"사랑해요"},{id:"laugh",emoji:"\uD83D\uDE02",label:"웃겨요"},{id:"wow",emoji:"\uD83D\uDE2E",label:"놀랐어요"},{id:"sad",emoji:"\uD83D\uDE22",label:"슬퍼요"},{id:"angry",emoji:"\uD83D\uDE20",label:"화나요"}]},8402:(t,e,a)=>{a.d(e,{Uz:()=>n,pD:()=>s,ys:()=>d});var r=a(9670),o=a(5317);let s=async t=>{let e=r.j2.currentUser;if(!e)throw Error("로그인이 필요합니다");let a=(0,o.H9)(r.db,"categories",t.categoryId),s=await (0,o.x7)(a);if(!s.exists())throw Error("존재하지 않는 카테고리입니다");let n=s.data().name,d=(0,o.H9)(r.db,"users",e.uid),i=await (0,o.x7)(d),l=i.exists()?i.data():null,c={...t,authorId:e.uid,authorName:(null==l?void 0:l.username)||e.displayName||e.email||"익명",authorPhotoURL:(null==l?void 0:l.photoURL)||e.photoURL||null,categoryName:n,createdAt:(0,o.O5)(),updatedAt:(0,o.O5)(),likes:0,commentCount:0};try{console.log("게시글 생성 시작:",c);let t=await (0,o.gS)((0,o.rJ)(r.db,"posts"),c);return console.log("게시글 생성 성공:",t.id),{id:t.id,...c}}catch(t){throw console.error("게시글 생성 실패:",t),t}},n=async(t,e,a)=>{try{let a=(0,o.H9)(r.db,"posts",t),s=await (0,o.x7)(a);if(!s.exists())throw Error("게시물이 존재하지 않습니다.");(s.data().likedBy||[]).includes(e)?await (0,o.mZ)(a,{likes:(0,o.GV)(-1),likedBy:(0,o.C3)(e),updatedAt:(0,o.O5)()}):await (0,o.mZ)(a,{likes:(0,o.GV)(1),likedBy:(0,o.hq)(e),updatedAt:(0,o.O5)()});let n=await (0,o.x7)(a);return{id:t,...n.data()}}catch(t){throw console.error("좋아요 업데이트 실패:",t),t}},d=async t=>{try{let e=(0,o.P)((0,o.rJ)(r.db,"comments"),(0,o._M)("postId","==",t));for(let t of(await (0,o.GG)(e)).docs){let e=(0,o.H9)(r.db,"comments",t.id),a=(await (0,o.GG)((0,o.rJ)(e,"replies"))).docs.map(t=>(0,o.kd)((0,o.H9)(e,"replies",t.id)));await Promise.all(a),await (0,o.kd)(e)}let a=(0,o.H9)(r.db,"posts",t);return await (0,o.kd)(a),!0}catch(t){throw console.error("포스트 삭제 실패:",t),t}}},9434:(t,e,a)=>{a.d(e,{cn:()=>s});var r=a(2596),o=a(9688);function s(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,o.QP)((0,r.$)(e))}}}]);